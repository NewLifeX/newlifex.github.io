(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{214:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"魔方core说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#魔方core说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 魔方core说明")]),t._v(" "),s("h2",{attrs:{id:"菜单注册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#菜单注册","aria-hidden":"true"}},[t._v("#")]),t._v(" 菜单注册")]),t._v(" "),s("h3",{attrs:{id:"区域使用areabasex区域特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#区域使用areabasex区域特性","aria-hidden":"true"}},[t._v("#")]),t._v(" 区域使用AreaBaseX区域特性")]),t._v(" "),s("ul",[s("li",[t._v("自定义一个继承AreaBaseX的区域特性类，命名为“区域名”+“Area”")]),t._v(" "),s("li",[t._v("继承构造函数base(areaName)")]),t._v(" "),s("li",[t._v("定义的新区域特性要声明一个静态构造函数，调用RegisterArea静态方法")]),t._v(" "),s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// <summary>权限管理区域注册</summary>")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DisplayName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"系统管理"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AdminArea")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AreaBaseX")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")]),t._v(" AreaName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nameof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AdminArea"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("TrimEnd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Area"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// <inheritdoc />")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AdminArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("base")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AreaName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AdminArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RegisterArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AdminArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("p",[t._v("如果不使用AreaBaseX区域特性路由，添加权限特性EntityAuthorizeAttribute，会自动添加此菜单")])]),t._v(" "),s("li",[s("p",[t._v("在区域控制器加上上面区域特性类")])])]),t._v(" "),s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AdminArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityController")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UserX"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"控制器设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#控制器设置","aria-hidden":"true"}},[t._v("#")]),t._v(" 控制器设置")]),t._v(" "),s("ul",[s("li",[t._v("如果控制器继承自魔方的功能控制器，那么会默认菜单相关选项")]),t._v(" "),s("li",[t._v("如果需要自定义，则需要继承自"),s("code",[t._v("ControllerBaseX")])]),t._v(" "),s("li",[t._v("重载"),s("code",[t._v("ScanActionMenu")]),t._v("方法，将菜单设置为可见"),s("code",[t._v("menu.Visible = true")])]),t._v(" "),s("li",[t._v("声明一个静态变量设置菜单顺序"),s("code",[t._v("protected static Int32 MenuOrder { get; set; } = 100;")])]),t._v(" "),s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApiArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DisplayName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SwaggerApi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SwaggerApi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SwaggerController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ControllerBaseX")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Int32")]),t._v(" MenuOrder "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" IDictionary"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MethodInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ScanActionMenu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IMenu")]),t._v(" menu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置显示名")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DisplayName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("IsNullOrEmpty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                menu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DisplayName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SwaggerController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token generic-method"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetCustomAttribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DisplayNameAttribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DisplayName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                menu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Visible "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dic "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("base")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ScanActionMenu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("menu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// GET: Swagger")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityAuthorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PermissionFlags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Detail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionResult")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("View")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("或者")]),t._v(" "),s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApiArea")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HomeController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityController")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UserX"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActionResult")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pager")]),t._v(" p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("View")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"视图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视图","aria-hidden":"true"}},[t._v("#")]),t._v(" 视图")]),t._v(" "),s("h3",{attrs:{id:"覆盖优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#覆盖优先级","aria-hidden":"true"}},[t._v("#")]),t._v(" 覆盖优先级")]),t._v(" "),s("ul",[s("li",[t._v("如果项目添加并引用Razor类库，那么它的优先级仅次于项目自身的视图")]),t._v(" "),s("li",[t._v("其次，要引用nuget包里面的视图或者直接引用一个视图dll，需要手动进行注册，否则不会被出现在系统的查找范围")]),t._v(" "),s("li",[t._v("可以同时存在多个视图资源，通过这个优先级选择对应视图，请查看下面更多说明")]),t._v(" "),s("li",[t._v("魔方的视图结构请"),s("a",{attrs:{href:"%E6%9F%A5%E7%9C%8B%E8%BF%99%E9%87%8C%E8%BF%98%E4%BB%80%E4%B9%88%E4%B9%9F%E6%B2%A1%E6%9C%89"}},[t._v("查看这里")])])]),t._v(" "),s("h3",{attrs:{id:"注册方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注册方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 注册方法")]),t._v(" "),s("ul",[s("li",[t._v("可通过"),s("code",[t._v("typeof(Areas_Admin_Views_Index_Index).Assembly.FullName")]),t._v("这样子的名称获得视图所在程序集名称，注册方法如下")])]),t._v(" "),s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[t._v("    services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddCustomApplicationParts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("asmNaneList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        asmNaneList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Areas_Admin_Views_Index_Index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Assembly"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FullName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("如果你想进行模块化开发，加载多个包含控制器的程序集，也是使用上面的方法进行注册")]),t._v(" "),s("li",[t._v("但请注意控制名不要重复，否则你需要在对"),s("a",{attrs:{href:"%E8%BF%99%E9%83%A8%E5%88%86%E8%BF%98%E6%B2%A1%E6%9C%89%E8%AF%B4%E6%98%8E"}},[t._v("路由命名空间优先级")]),t._v("进行设置")])]),t._v(" "),s("h3",{attrs:{id:"更多说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更多说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 更多说明")]),t._v(" "),s("ul",[s("li",[t._v("所有编译之后的视图程序集，生成的类名和命名空间都是一样的，所以如果同时引用多个含有视图的nuget包，编译器会"),s("code",[t._v("typeof(Areas_Admin_Views_Index_Index)")]),t._v("在这里报错")]),t._v(" "),s("li",[t._v("那为什么Razor类库和项目本身都存在同样名字的视图，又不会报错呢？因为它们都还是源代码，还没编译啊。")]),t._v(" "),s("li",[t._v("core mvc 加载项目本身的控制器和视图的方法"),s("code",[t._v("ApplicationPartManager.PopulateDefaultParts")]),t._v("是内部的，不能调用，里面会根据引入的外部控制器所在程序集（比如你的项目引用了A程序集），寻找所有依赖于A程序集的程序集（比如A程序集对应的"),s("code",[t._v("A.Views.dll")]),t._v("），一起加载进系统成为系统的一部分。魔方提供"),s("code",[t._v("AddCustomApplicationParts")]),t._v("拓展方法自定义加载程序集，即使"),s("code",[t._v("A.Views.dll")]),t._v("依赖于A,你也可以选择不加载"),s("code",[t._v("A.Views.dll")]),t._v("，通过自己实现自己视图来呈现页面，给你更多的选择！")])]),t._v(" "),s("h2",{attrs:{id:"数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据")]),t._v(" "),s("h3",{attrs:{id:"razor视图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#razor视图","aria-hidden":"true"}},[t._v("#")]),t._v(" Razor视图")]),t._v(" "),s("ul",[s("li",[t._v("页面使用Razor，获取数据通过ViewBag传送")])]),t._v(" "),s("h4",{attrs:{id:"数据列表主页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据列表主页","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据列表主页")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("视图页")]),t._v(" "),s("ul",[s("li",[t._v("视图"),s("code",[t._v("Model")]),t._v("，类型为"),s("code",[t._v("IEnumerable<TEntity>")])])])]),t._v(" "),s("li",[s("p",[t._v("数据列表")])]),t._v(" "),s("li",[s("p",[t._v("分页信息")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ViewBag.Page")])])])])]),t._v(" "),s("h4",{attrs:{id:"表单页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表单页","aria-hidden":"true"}},[t._v("#")]),t._v(" 表单页")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("/{controller}/Detail/id")])])]),t._v(" "),s("h3",{attrs:{id:"api请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api请求","aria-hidden":"true"}},[t._v("#")]),t._v(" Api请求")]),t._v(" "),s("ul",[s("li",[t._v("如果是前后分离，直接通过api获取数据")])]),t._v(" "),s("h4",{attrs:{id:"数据列表主页-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据列表主页-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据列表主页")]),t._v(" "),s("ul",[s("li",[t._v("采用token验证身份\n"),s("ul",[s("li",[s("code",[t._v("/{controller}/Json?id=p=")])]),t._v(" "),s("li",[t._v("id为令牌")]),t._v(" "),s("li",[t._v("p为分页信息")])])]),t._v(" "),s("li",[t._v("cookie方式\n"),s("ul",[s("li",[s("code",[t._v("/{controller}/Index?p=")])]),t._v(" "),s("li",[t._v("p为分页信息")])])])]),t._v(" "),s("h4",{attrs:{id:"表单页-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表单页-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 表单页")]),t._v(" "),s("ul",[s("li",[t._v("查看\n"),s("ul",[s("li",[s("code",[t._v("/{controller}/Detail?id=")])]),t._v(" "),s("li",[t._v("id表示主键，为空表示添加")])])]),t._v(" "),s("li",[t._v("添加\n"),s("ul",[s("li",[s("code",[t._v("/{controller}/Add")])]),t._v(" "),s("li",[t._v("post提交表单则保存，get获取数据")])])]),t._v(" "),s("li",[t._v("添加\n"),s("ul",[s("li",[s("code",[t._v("/{controller}/Edit")])]),t._v(" "),s("li",[t._v("post提交表单则保存，get获取数据")])])])])])}],!1,null,null,null);a.default=e.exports}}]);